<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>ãƒãƒ¼ã‚«ãƒ¼ãƒ™ãƒ¼ã‚¹AR - ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
    #instructions {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      font-family: sans-serif;
      font-size: 14px;
      z-index: 1000;
      text-align: center;
      max-width: 80%;
    }
    #debug {
      position: fixed;
      bottom: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px;
      border-radius: 5px;
      font-family: monospace;
      font-size: 11px;
      z-index: 1000;
    }
  </style>
</head>
<body>
  
  <div id="instructions">
    ğŸ“± ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚«ãƒ¡ãƒ©ã«å‘ã‘ã¦ãã ã•ã„<br>
    <small>ãƒãƒ¼ã‚«ãƒ¼ãŒæ¤œå‡ºã•ã‚Œã‚‹ã¨ãƒã‚¹ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</small>
  </div>
  
  <div id="debug">
    <div><strong>ğŸ“Š ãƒ‡ãƒãƒƒã‚°æƒ…å ±</strong></div>
    <div>ãƒãƒ¼ã‚«ãƒ¼æ¤œå‡º: <span id="marker-status">å¾…æ©Ÿä¸­</span></div>
  </div>

  <a-scene
    embedded
    arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
    vr-mode-ui="enabled: false"
    renderer="logarithmicDepthBuffer: true; precision: medium;">
    
    <!-- ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼ï¼ˆpattern.patt ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ï¼‰ -->
    <a-marker 
      type="pattern"
      url="pattern.patt"
      id="custom-marker"
      raycaster="objects: .clickable"
      emitevents="true"
      cursor="fuse: false; rayOrigin: mouse;">
      
      <!-- ãƒã‚¹ã‚¿ãƒ¼ç”»åƒã‚’è¡¨ç¤º -->
      <a-image
        src="poster.jpg"
        position="0 0 0"
        rotation="-90 0 0"
        width="2"
        height="3"
        opacity="1">
      </a-image>
      
      <!-- ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šãƒãƒ¼ã‚«ãƒ¼ã®åº§æ¨™ç³»ã‚’ç¤ºã™çŸ¢å° -->
      <!-- Xè»¸: èµ¤ -->
      <a-entity
        geometry="primitive: cylinder; radius: 0.01; height: 1"
        material="color: red"
        position="0.5 0 0"
        rotation="0 0 90">
      </a-entity>
      
      <!-- Yè»¸: ç·‘ -->
      <a-entity
        geometry="primitive: cylinder; radius: 0.01; height: 1"
        material="color: green"
        position="0 0.5 0">
      </a-entity>
      
      <!-- Zè»¸: é’ -->
      <a-entity
        geometry="primitive: cylinder; radius: 0.01; height: 1"
        material="color: blue"
        position="0 0 0.5"
        rotation="90 0 0">
      </a-entity>
      
    </a-marker>

    <!-- ã‚«ãƒ¡ãƒ© -->
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // ãƒãƒ¼ã‚«ãƒ¼æ¤œå‡ºã‚¤ãƒ™ãƒ³ãƒˆ
    const marker = document.querySelector('#custom-marker');
    const statusElem = document.getElementById('marker-status');
    
    marker.addEventListener('markerFound', () => {
      console.log('ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ');
      statusElem.textContent = 'âœ… æ¤œå‡ºä¸­';
      statusElem.style.color = '#0f0';
    });
    
    marker.addEventListener('markerLost', () => {
      console.log('ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼ãŒè¦‹å¤±ã‚ã‚Œã¾ã—ãŸ');
      statusElem.textContent = 'âŒ æœªæ¤œå‡º';
      statusElem.style.color = '#f00';
    });
    
    // 5ç§’å¾Œã«èª¬æ˜ã‚’æ¶ˆã™
    setTimeout(() => {
      const instructions = document.getElementById('instructions');
      instructions.style.transition = 'opacity 1s';
      instructions.style.opacity = '0';
      setTimeout(() => {
        instructions.style.display = 'none';
      }, 1000);
    }, 5000);
  </script>
</body>
</html>
