<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>ãƒãƒ¼ã‚«ãƒ¼ãƒ™ãƒ¼ã‚¹AR - è¤‡æ•°ãƒãƒ¼ã‚«ãƒ¼å¯¾å¿œ</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
    #instructions {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      font-family: sans-serif;
      font-size: 14px;
      z-index: 1000;
      text-align: center;
      max-width: 80%;
    }
    #debug {
      position: fixed;
      bottom: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px;
      border-radius: 5px;
      font-family: monospace;
      font-size: 11px;
      z-index: 1000;
    }
    .ok { color: #0f0; }
    .err { color: #f00; }
  </style>
</head>
<body>
  
  <div id="instructions">
    ğŸ“± ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚«ãƒ¡ãƒ©ã«å‘ã‘ã¦ãã ã•ã„<br>
    <small>Hiro / Kanji / A / B / C / F ãƒãƒ¼ã‚«ãƒ¼ã«å¯¾å¿œ</small>
  </div>
  
  <div id="debug">
    <div><strong>ğŸ“Š æ¤œå‡ºçŠ¶æ³</strong></div>
    <div>Hiro: <span id="hiro-status" class="err">âŒ</span></div>
    <div>Kanji: <span id="kanji-status" class="err">âŒ</span></div>
    <div>Pattern A: <span id="a-status" class="err">âŒ</span></div>
    <div>Pattern B: <span id="b-status" class="err">âŒ</span></div>
  </div>

  <a-scene
    embedded
    arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
    vr-mode-ui="enabled: false"
    renderer="logarithmicDepthBuffer: true; precision: medium;">
    
    <!-- Hiroãƒãƒ¼ã‚«ãƒ¼ -->
    <a-marker 
      preset="hiro"
      id="hiro-marker"
      emitevents="true">
      <a-image
        src="poster.jpg"
        position="0 0 0"
        rotation="-90 0 0"
        width="1.5"
        height="2.25">
      </a-image>
      <a-text
        value="Hiro Marker"
        position="0 1.5 0"
        rotation="-90 0 0"
        align="center"
        color="#FF0000"
        scale="2 2 2">
      </a-text>
    </a-marker>

    <!-- Kanjiãƒãƒ¼ã‚«ãƒ¼ -->
    <a-marker 
      preset="kanji"
      id="kanji-marker"
      emitevents="true">
      <a-box
        position="0 0.5 0"
        material="color: blue;"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000">
      </a-box>
      <a-text
        value="Kanji Marker"
        position="0 1.5 0"
        rotation="-90 0 0"
        align="center"
        color="#0000FF"
        scale="2 2 2">
      </a-text>
    </a-marker>
    
    <!-- ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼Aï¼ˆpattern-a.patt ã‚’ä½¿ç”¨ï¼‰ -->
    <a-marker 
      type="pattern"
      url="pattern-a.patt"
      id="a-marker"
      emitevents="true">
      <a-sphere
        position="0 0.5 0"
        radius="0.5"
        material="color: yellow;">
      </a-sphere>
      <a-text
        value="Pattern A"
        position="0 1.5 0"
        rotation="-90 0 0"
        align="center"
        color="#FFFF00"
        scale="2 2 2">
      </a-text>
    </a-marker>
    
    <!-- ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼Bï¼ˆpattern-b.patt ã‚’ä½¿ç”¨ï¼‰ -->
    <a-marker 
      type="pattern"
      url="pattern-b.patt"
      id="b-marker"
      emitevents="true">
      <a-cylinder
        position="0 0.5 0"
        radius="0.3"
        height="1"
        material="color: green;">
      </a-cylinder>
      <a-text
        value="Pattern B"
        position="0 1.5 0"
        rotation="-90 0 0"
        align="center"
        color="#00FF00"
        scale="2 2 2">
      </a-text>
    </a-marker>

    <!-- ã‚«ãƒ¡ãƒ© -->
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // ãƒãƒ¼ã‚«ãƒ¼æ¤œå‡ºã‚¤ãƒ™ãƒ³ãƒˆã®è¨­å®š
    const markers = [
      { id: 'hiro-marker', statusId: 'hiro-status' },
      { id: 'kanji-marker', statusId: 'kanji-status' },
      { id: 'a-marker', statusId: 'a-status' },
      { id: 'b-marker', statusId: 'b-status' }
    ];
    
    markers.forEach(marker => {
      const markerElem = document.querySelector(`#${marker.id}`);
      const statusElem = document.getElementById(marker.statusId);
      
      if (markerElem && statusElem) {
        markerElem.addEventListener('markerFound', () => {
          console.log(`${marker.id} ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ`);
          statusElem.textContent = 'âœ…';
          statusElem.className = 'ok';
        });
        
        markerElem.addEventListener('markerLost', () => {
          console.log(`${marker.id} ãŒè¦‹å¤±ã‚ã‚Œã¾ã—ãŸ`);
          statusElem.textContent = 'âŒ';
          statusElem.className = 'err';
        });
      }
    });
    
    // 5ç§’å¾Œã«èª¬æ˜ã‚’æ¶ˆã™
    setTimeout(() => {
      const instructions = document.getElementById('instructions');
      instructions.style.transition = 'opacity 1s';
      instructions.style.opacity = '0';
      setTimeout(() => {
        instructions.style.display = 'none';
      }, 1000);
    }, 5000);
  </script>
</body>
</html>
